{"root":{"data":{"text":"nginx"},"children":[{"data":{"id":"bwp5c15xals0","created":1567389859718,"text":"配置","layout_right_offset":{"x":82.24999953433871,"y":-59.000000074505806}},"children":[{"data":{"id":"bxc8w2ugxyw0","created":1569735772995,"text":"location 语法"},"children":[]},{"data":{"id":"bxc93tpfdkg0","created":1569736380012,"text":"rewrite 语法"},"children":[]},{"data":{"id":"bxc8w757g7s0","created":1569735782351,"text":"负载均衡策略","note":"|-|-|\n|-|-|\n| `轮询` | 默认方式 |\n| `weight` | 权重方式 |\n| `ip_hash` | 依据ip分配方式 |\n| `least_conn` | 最少连接方式 |\n| fair（第三方） | 响应时间方式 |\n| url_hash（第三方） | 依据URL分配方式 |"},"children":[{"data":{"id":"bxc8xg5lhfs0","created":1569735880330,"text":"轮询","note":"|-|-|\n|:-:|:-:|\n| `fail_timeout` | 与max_fails结合使用。 |\n| `max_fails` | 设置在fail_timeout参数设置的时间内最大失败次数，如果在这个时间内，所有针对该服务器的请求都失败了，那么认为该服务器会被认为是停机了， |\n| `fail_time` | 服务器会被认为停机的时间长度,默认为10s。 |\n| `backup` | 标记该服务器为备用服务器。当主服务器停止时，请求会被发送到它这里。 |\n| `down` | 标记服务器永久停机了。 |"},"children":[]},{"data":{"id":"bxc92qq3enc0","created":1569736295158,"text":"权重方式"},"children":[]},{"data":{"id":"bxc92ztqcs80","created":1569736314969,"text":"ip_hash"},"children":[]},{"data":{"id":"bxc936unhaw0","created":1569736330262,"text":"least_conn"},"children":[]}]},{"data":{"id":"bxc96ybh7yo0","created":1569736625145,"text":"跨域配置","note":"```\nadd_header \"Access-Control-Allow-Origin\" $http_origin always;\nadd_header \"Access-Control-Allow-Credentials\" \"true\" always;\nadd_header \"Access-Control-Allow-Methods\" \"GET, POST, PUT, DELETE, OPTIONS\" always;\nadd_header Access-Control-Allow-Headers \"Cookie, Origin, X-Requested-With, Content-Type, Accept, Authorization, x-vipkid-ssoToken\" always;\nadd_header Access-Control-Expose-Headers \"X-Request-ID, X-Request-Seq\" always;\nadd_header X-Request-ID    $request_trace_id always;\nadd_header X-Request-Seq   $request_trace_seq always;\n```"},"children":[]}]},{"data":{"id":"bwp5c9x71w80","created":1567389878781,"text":"状态码含义及原因","note":"最重要的一条：**查看错误日志**"},"children":[{"data":{"id":"bwq9e0mv4c80","created":1567502859690,"text":"302"},"children":[]},{"data":{"id":"bwq9e5dbow80","created":1567502869997,"text":"304"},"children":[]},{"data":{"id":"bwq9e76ap280","created":1567502873926,"text":"400"},"children":[{"data":{"id":"bwsp6y6qr6o0","created":1567750563484,"text":"bad request"},"children":[]},{"data":{"id":"bwsp73lvfgw0","created":1567750575283,"text":"header 头过大造成，修改配置"},"children":[{"data":{"id":"bwsp7drhcyo0","created":1567750597390,"text":"max-http-header-size: 16KB"},"children":[]}]}]},{"data":{"id":"bwq9e90a3400","created":1567502877915,"text":"404"},"children":[{"data":{"id":"bwq9rb9ah7k0","created":1567503901548,"text":"Not Found"},"children":[]}]},{"data":{"id":"bwq9eet1xzc0","created":1567502890539,"text":"409"},"children":[]},{"data":{"id":"bwq9ebvn4bs0","created":1567502884165,"text":"499"},"children":[{"data":{"id":"bwq9fonwhpk0","created":1567502990360,"text":"解释","note":"这是nginx定义的一个状态码，用于表示这样的错误：服务器返回http头之前，客户端就提前关闭了http连接。\n在做反向代理的时候加入，作为其他服务器的时候，关闭为好，默认设置是关闭的"},"children":[]},{"data":{"id":"bwq9gbkkeso0","created":1567503040224,"text":"解决"},"children":[{"data":{"id":"bwq9gea0u940","created":1567503046117,"text":"临时解决"},"children":[{"data":{"id":"bwq9gikfx2w0","created":1567503055454,"text":"设置 proxy_ignore_client_abort on;"},"children":[{"data":{"id":"bx1xx16qbf40","created":1568689215971,"text":"只能忽略问题，未解决"},"children":[]}]}]},{"data":{"id":"bwq9gw136qo0","created":1567503084758,"text":"可能原因"},"children":[{"data":{"id":"bx1xwr4ng3k0","created":1568689194078,"text":"网络不稳定，客户端连接中断"},"children":[]}]}]}]},{"data":{"id":"bwq9egm5tu00","created":1567502894476,"text":"502"},"children":[]},{"data":{"id":"bwq9eilwcow0","created":1567502898814,"text":"504"},"children":[{"data":{"id":"bwq9qwlypuo0","created":1567503869662,"text":"超时"},"children":[]},{"data":{"id":"bwq9q38m9zk0","created":1567503805729,"text":"可能原因"},"children":[{"data":{"id":"bwq9q7u58so0","created":1567503815738,"text":"处理时间过长"},"children":[]},{"data":{"id":"bwq9qd9aqls0","created":1567503827538,"text":"进程全部 僵尸化"},"children":[]}]}]},{"data":{"id":"bxc8u6y72fk0","created":1569735625199,"text":"fastcgi request record is too big"},"children":[{"data":{"id":"bxc8ua9pxoo0","created":1569735632426,"text":"nginx源码只支持 64k 以下请求（get方法）"},"children":[]}]}]},{"data":{"id":"bxc8pmhttio0","created":1569735267217,"text":"模块"},"children":[{"data":{"id":"bxc8pqfb3hc0","created":1569735275772,"text":"fastcgi"},"children":[{"data":{"id":"bxc8ptpbt0w0","created":1569735282908,"text":"通讯方式"},"children":[{"data":{"id":"bxc8q03d0r40","created":1569735296817,"text":"ip"},"children":[]},{"data":{"id":"bxc8q2jru600","created":1569735302163,"text":"socket"},"children":[{"data":{"id":"bxc8rge92b40","created":1569735410668,"text":"并发高时性能较好","note":"```\nlisten = /dev/shm/php-cgi.sock\nlisten.mode = 0666\n\nfastcgi_pass unix:/dev/shm/php-cgi.sock;\n```"},"children":[]}]}]},{"data":{"id":"bxc8utlay0o0","created":1569735674486,"text":"配置在 http 和 location 下"},"children":[]}]}]},{"data":{"id":"bxc94cu04og0","created":1569736421648,"text":"日志"},"children":[{"data":{"id":"bxc94fpdx680","created":1569736427899,"text":"配置"},"children":[]},{"data":{"id":"bxc94hvd1vk0","created":1569736432614,"text":"分析"},"children":[]}]},{"data":{"id":"by2q5g8x4y80","created":1572425025186,"text":"相似软件"},"children":[]}]},"template":"default","theme":"fish","version":"1.4.43"}