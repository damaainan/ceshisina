## 一文详解Linux系统常用监控工具

2018.09.18 06:22*

来源：[https://www.jianshu.com/p/e4dcafdf0357](https://www.jianshu.com/p/e4dcafdf0357)


![][0]

本文共 1329字，阅读大约需要 3分钟 ！

-----

## 概 述

本文主要记录一下 Linux系统上一些常用的系统监控工具，非常好用。正所谓磨刀不误砍柴工，花点时间总结一下是值得的！

 **`注：`**  本文首发于  [My Personal Blog][12]，欢迎光临 [小站][13]

本文内容脑图如下：


![][1]
-----

## top 命令

top 命令我想大家都挺熟悉吧！Linux 下的 top 命令有点类似于 Windows下的任务管理器，能够实时动态地监控并显示系统中各个进程的资源占用状况，是 Linux下常用的性能监控和分析工具。

一个常见的top命令的执行视图如下：


![][2]

下面我们详细在图中标注出每个指标的含义，认真看图对比理解吧（必要时可保存该图备查哦）：


![][3]

怎么样，理解起来够直观了吧，至于 top命令的其他一些带参数用法自行help吧，太多了，不再赘述了！

-----

## htop 命令
`htop`是 Linux下一个交互式的进程浏览器，可以完全替代上一小节中所讲的 top命令，与 top命令对比，htop命令有如下优点：


* 直接支持鼠标点击操作（ 就问你6不6！）
* 画面可以水平垂直滚动，更像一个窗口
* 可以跟踪进程，显示进程打开的文件
* 支持进程的树状图显示
* 支持按照名称查找进程


总之可视化方面做得66的，我们来体验一下：


![][4]

就该图来说，分成三部分：


* 顶部是资源使用情况概览，这进度条看着就挺酷炫
* 中间是进程表，和top命令的类似
* 下面是操作指引和快捷键清晰明了


我们接下来再来看一些图形化的操作：


* 进程树状图



![][5]

* 鼠标点击各种指标来排序



![][6]

* 跟踪进程功能



![][7]

![][8]
-----

## iotop 命令
`iotop`是用来监控硬盘 IO的使用情况，UI 界面和 top类似，其中包括 PID、用户、I/O、进程 等相关信息。

Linux 下系统自带的IO统计工具如 iostat，nmon等大多数是只能统计到 per设备的读写情况，如果你想知道每个进程是如何使用 IO的就比较麻烦，使用 iotop命令可以很方便的查看。


![][9]
-----

## iftop 命令

iftop 是Linux系统的流量和带宽监控工具，可用于查看实时的网络流量、监控TCP/IP连接等，也是非常有用的！

我们来做一下实验，命令执行后效果如下：


![][10]

![][11]
`iftop`命令常用的参数如下，这里做个小规模总结：


* `-i`设定监测的网卡，如：`# iftop -i eth1`
* `-B`以bytes为单位显示流量 (默认是bits)，如：`# iftop -B`
* `-n`使 host信息默认直接都显示 IP，如：`# iftop -n`
* `-N`使端口信息默认直接都显示端口号，如:`# iftop -N`
* `-F`显示特定网段的进出流量，如`# iftop -F 10.10.1.0/24`或`# iftop -F 10.10.1.0/255.255.255.0`
* `-h`（display this message），帮助，显示参数信息
* `-p`使用这个参数后，中间的列表显示的本地主机信息，出现了本机以外的IP信息;
* `-b`使流量图形条默认就显示;


再来总结一下，进入 iftop 视图画面后的一些操作命令 (注意大小写)：


* 按`h`切换是否显示帮助;
* 按`n`切换显示本机的IP或主机名;
* 按`s`切换是否显示本机的host信息;
* 按`d`切换是否显示远端目标主机的host信息;
* 按`t`切换显示格式为2行/1行/只显示发送流量/只显示接收流量;
* 按`N`切换显示端口号或端口服务名称;
* 按`S`切换是否显示本机的端口信息;
* 按`D`切换是否显示远端目标主机的端口信息;
* 按`p`切换是否显示端口信息;
* 按`P`切换暂停/继续显示;
* 按`b`切换是否显示平均流量图形条;
* 按`T`切换是否显示每个连接的总流量;
* 按`l`打开屏幕过滤功能，输入要过滤的字符，比如ip,按回车后，屏幕就只显示这个IP相关的流量信息;
* 按`L`切换显示画面上边的刻度;刻度不同，流量图形条会有变化;
* 按`j`或按`k`可以向上或向下滚动屏幕显示的连接记录;
* 按`1`或`2`或`3`可以根据右侧显示的三列流量数据进行排序;
* 按`<`根据左边的本机名或 IP排序;
* 按`>`根据远端目标主机的主机名或 IP排序;
* 按`o`切换是否固定只显示当前的连接;


-----

## 后 记

由于能力有限，若有错误或者不当之处，还请大家批评指正，一起学习交流！


* My Personal Blog：[CodeSheep  程序羊][14]

* [我的半年技术博客之路][15]


-----

-----


[12]: http://www.codesheep.cn
[13]: http://www.codesheep.cn
[14]: http://www.codesheep.cn/
[15]: https://www.jianshu.com/p/28ba53821450
[0]: ./img/9824247-7f40f57235d09966.png
[1]: ./img/9824247-80cf4983505710c9.png
[2]: ./img/9824247-5ac09d8c119de896.png
[3]: ./img/9824247-0baa31ac69176e1b.png
[4]: ./img/9824247-d4584d88e91d1662.png
[5]: ./img/9824247-31df482468dab97d.png
[6]: ./img/9824247-acd25b08e9afed36.png
[7]: ./img/9824247-cf8c159e9f0d33c3.png
[8]: ./img/9824247-f93871b0ddf594c6.png
[9]: ./img/9824247-fdad96fa15a75b02.png
[10]: ./img/9824247-819907d22caa1949.png
[11]: ./img/9824247-ca388ca1100fd085.png