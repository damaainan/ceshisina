## [PHP]一张图片彻底弄清isset empty函数区别！！！

来源：[https://segmentfault.com/a/1190000015415176](https://segmentfault.com/a/1190000015415176)


## 简单谈一下isset和empty的区别？

如果你是在面试，碰巧面试官提了这个问题。你可以这样回答：


* **`如果变量值为0、空字符串、空数组等等，empty认为它是空的，而isset认为它不是空的。`** 
* **`如果变量不存在，isset和empty都认为它是空的。`** 
* **`建议使用isset函数，避免使用empty掉坑。`** 


如果你想了解他们之间更详细的区别，请继续往下看...
## 一张图彻底弄清

用ProcessOn画了一张图片

 **`注意`** ：


* 为了方便对比， 这里对empty函数取反了。注意是`!empty()`
* ""、0、"0"、FALSE、array()...该条件没有补全，可以自行测试
* **`如果你看上去一头雾水，请先暂时跳过这一小节`** 



![][0]

这就是isset empty对应不同变量时的返回结果，两者的区别都汇聚在这张图片中了。

绿色虚线框里`isset`的表现，黄色虚线框里是`!empty`的表现。可以看出，empty相比isset需要判断更多的条件，才能确定返回结果。

如果你有些许地方不明白，或者记不住全部细节。下面我来告诉你怎么记住这张图片的所有内容！
## 矿泉水的思考

想象一下，现在桌子上有一个矿泉水瓶。瓶子可能有这4种状况：


* 水瓶：瓶子里有水
* 空气瓶：水喝完了，瓶子里面只有空气
* 真空瓶：瓶子拿去抽了真空，里面啥都没有
* 桌面上没有瓶子


把变量类比成矿泉水瓶，对应4种状态：


* 一般值：存储单元里面放着一般的值
* 空气值：变量为 ""、0、"0"、FALSE、array()...
* 真空值：变量为NULL
* 变量不存在或没有定义


## 小学生empty 和 中学生isset

假设我们可以用isset empty函数要判断一个矿泉水瓶是不是空的，会有这样的结果：


* 如果是空气瓶，那么empty认为它是空的（它看起来的确是空的啊！），而isset却认为它不是空的（它有空气啊！）
* 如果是真空瓶，那么empty isset都会认为它是空的
* 如果是水瓶，那么empty isset都会认为它不是空的


可以看出，empty就是一个不懂科学的小学生，以为瓶子看起来是空的便是空瓶！果然还是太年轻啊~而isset是个学过物理的中学生，明白 **`“真空”`** 的概念——他清楚瓶子里还有空气！

所以上面三种情况中第1条，老司机isset经验丰富，得出了跟小学生empty不一样的结论。


现在我们可以知道，如果用这两个函数来判断变量，结果会是这样：


* **`如果是空气值（ ""、0、"0"、FALSE、array()...），那么empty认为它是空的，而isset认为它不是空的`** 
* **`如果是真空值（NULL），那么empty isset都认为它是空的`** 
* **`如果是一般值（除了这两种情况，也就是说瓶子里面有水），那么empty isset都认为它不是空的`** 


这就是在一开始给出的面试回答。现在，理解起来是不是很容易呢？
## 详细对比
### isset()函数

格式：bool isset ( mixed var [, mixed var [, ...]] )

功能：检测变量是否设置

返回值：

若变量不存在则返回 FALSE
若变量存在且其值为NULL，也返回 FALSE
若变量存在且值不为NULL，则返回 TURE
同时检查多个变量时，每个单项都符合上一条要求时才返回 TRUE，否则结果为 FALSE
更多说明：
使用 unset() 释放变量之后，它将不再是 isset()。
PHP函数isset() **`只能用于变量`** ，传递任何其它参数都将造成解析错误。
检测常量是否已设置可使用 defined() 函数。
### empty()函数

格式：bool empty ( mixed var )

功能：检查一个变量是否为空

返回值：

若变量不存在则返回 TRUE
若变量存在且其值为""、0、"0"、NULL、FALSE、array()、var $var以及没有任何属性的对象，则返回 TURE
若变量存在且值不为""、0、"0"、NULL、FALSE、array()、var $var以及没有任何属性的对象，则返回 FALSE
更多说明：
empty()的返回值=!(boolean) var，但不会因为变量未定义而产生警告信息。参见[转换为布尔值][4]获取更多信息。
empty() **`只能用于变量`** ，传递任何其它参数都将造成Paser error而终止运行。
检测常量是否已设置可使用 defined() 函数。
### 最完整的区别

现在我们把矿泉水和变量放到一起，画出最完整的区别图：

如果能你能读懂前文内容，你将会彻底理解这两张图，往后isset empty区别就印刻在脑海里了。如果还有人问你两者区别，马上甩出这种图~

![][0]

![][2]

有兴趣可以往下阅读，官方手册给出的例子...
## PHP 手册

![][3]

这是一张将empty isset if($var)区别的表格，从表格中我们可以发现：


* isset() 返回值等同 !is_null()
* empty() 返回值等同 !boolean($x)。if($x)其实是先把变量转换成boolean类型，再进行条件判断

如果$var不存在，if($x) 语句会让php发生E_NOTICE级别异常，但不是致命错误，依旧可以执行脚本；empty($x)和 isset($x)不会报告任何异常





## 参考


* [PHP isset()与empty()的使用区别详解_脚本之家][5]
* [PHP: PHP 类型比较表 - Manual][6]


## 转载

本文由 **`1nFrastr`** 编写，转载请注明出处！

[4]: http://php.net/manual/zh/language.types.boolean.php#language.types.boolean.casting
[5]: https://m.jb51.net/show/24666
[6]: http://php.net/manual/zh/types.comparisons.php
[0]: ./img/1460000015434614.png
[1]: ./img/1460000015434614.png
[2]: ./img/1460000015434615.png
[3]: ./img/1460000015434616.png