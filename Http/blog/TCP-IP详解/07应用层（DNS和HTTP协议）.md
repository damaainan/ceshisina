<style type="text/css">
    body{background: rgba(12, 100, 129, 0.2)}
</style>
# [TCP/IP（六）应用层（DNS和HTTP协议）][0]

**阅读目录(Content)**

* [一、应用层概述][1]
    * [1.1、应用层简介][2]
    * [1.2、应用层中的应用软件分两种：客户/服务器和P2P体系结构][3]
* [二、应用层协议之DNS协议][4]
    * [2.1、DNS协议概述][5]
    * [2.2、DNS协议工作过程][6]
* [三 、应用层协议之HTTP协议][7]
    * [3.1、HTTP协议简介][8]
    * [3.2、统一资源定位符URL][9]
    * [3.3、超文本传输协议][10]
    * [3.4、请求和响应报文的格式][11]
    * [3.5、HTTP协议功能][12]

前言

到这一篇我已经把TCP/IP五层模型详细的说明了一遍，大体的从物理层到最上层的应用层做了一个大概的了解，其实总体学下来东西非常的多，我们需要经常的去系统性的去学习它。不然过一段时间就忘记了！

回顾一下前面的知识：

![][13]

OSI体系结构分为7层：物理层、链路层、网路层、传输层、会话层、表示层、应用层。

TCP/IP5层参考模型：物理层、数据链路层、网络层、传输层、应用层

TCP/IP的体系结构分为4层： 网络接口层(物理层、链路层)、网际层(网络层IP)、传输层(UDP/TCP)、应用层(会话层、表示层、应用层)

原理体系结构：物理层、链路层、网络层、传输层、应用层(会话层+表示层+应用层) 

OSI七层协议体系结构：优点：概念清楚，理论完整，缺点但是复杂而不实用

TCP/IP协议族四层，缺点：太简单，但被广泛使用

结合上面两个的优缺点，就有了5层协议的原理体系结构，即简洁又能把概念描述清楚。

[回到顶部(go to top)][14]

# 一、应用层概述

## 1.1、应用层简介

在百度中的介绍：

![][15]

位于 计算机网络体系结构的最上层，前面四层做的所有事情就是为了他服务 ，他也是 设计和建立计算机网络的最终目的 ，通俗的讲，就是我们 开发的应用软件，就处于这一层 ，

比如，QQ，浏览器访问网页，等等你看得到的应用软件都是在这一层，但是这些软件在运行的过程中，也需要依靠一些特定的协议才能完成相应的功能，

比如浏览器通过网址访问网页，其中是如何做到的，这就是我们所要学习的东西。

## 1.2、应用层中的应用软件分两种：客户/服务器和P2P体系结构

1）客户/服务器(client/server)

这种类型，就是我们 很熟悉的客户端，服务器模型，客户端请求服务器 ，服务器响应客户端这样的一种方式进行“交流”

2）P2P

也称为 对等体系结构 。P2P相当于每个人的电脑度可以当服务器，也可以当客户端，不单单限制于只能客户端访问服务器，

你自己的计算机可以去访问别人的计算机上的内容，别的同样可以访问你计算机上的内容，这样达到一种共享的状态。

[回到顶部(go to top)][14]

# 二、应用层协议之DNS协议

## 2.1、DNS协议概述

 Domain Name System 域名系统 。也可以叫做 域名解析协议 。在我们在浏览器访问网页的时候，通常度是用我们所熟悉的一连串有意义的英文字符标识，比如www.baidu.com、www.sohu.com等。

但是我们学了前面的知识， 计算机并不是通过这些字符串去找到对应的计算机，而是通过32位的二进制，也就是我们的IP地址来找 。所以就有了DNS协议。他的作用就是 将域名解析成对应的IP地址 。

因为让我们人去记那些IP地址，很难记得住，所以就想办法让IP地址转变为了现在的域名，在进行访问的时候，只需要将域名解析为对应的IP地址就行了，这个域名也很有讲究，其中分为好多层域名，

是独一无二的。这里不细讲这个，只要我们知道，域名通过DNS能找到对应的IP地址就行了。

## 2.2、DNS协议工作过程

1）通过域名访问网页

2）计算机会先 将域名发送到一个解析域名的服务器 上

2.1）在其 服务器上有很多服务器，能解析各种各样的域名 ，比如有专门解析.org的，解析.com的，解析.net的。等等，最主要的有一个 根域名服务器

2.2 ）域名解析(在服务器上查找IP地址)的过程有两种算法， 迭代查询，递归查询。一般是两种查询的结合

2.3 ）本机计算机找到其中一台解析域名的服务器(可能是.com)，如果 没有找到对应的IP地址，那么就会去找根域名服务器 ，根域名服务器知道所有的子服务器，

所以他肯定知道该域名所对应的IP地址在那个子服务器中，所以告诉第一次查询的服务器要他去另一台服务器上找，找到了，就将其返回给计算机，

以后在有另一台计算机也通过这个域名访问，那么 第一台服务器会有原来的域名IP地址的缓存，就不用去找根服务器了 。

3）找到了，就能找到我们要访问的服务器了。

![][16]

[回到顶部(go to top)][14]

# 三 、应用层协议之HTTP协议

## 3.1、HTTP协议简介

1）超文本传输协议（HTTP，HyperText Transfer Protocol)是互联网上应用最为广泛的一种网络协议。所有的WWW文件都必须遵守这个标准。  
2）HTTP是一个客户端和服务器端请求和应答的标准（TCP）。客户端是终端用户，服务器端是网站。通过使用Web浏览器、网络爬虫或者其它的工具，客户端发起一个到服务器上指定端口（默认端口为80）的HTTP请求。

（我们称这个客户端）叫用户代理（user agent）。应答的服务器上存储着（一些）资源，比如HTML文件和图像。（我们称）这个应答服务器为源服务器（origin server）。在用户代理和源服务器中间可能存在多个中间层，

比如代理，网关，或者隧道（tunnels）。尽管TCP/IP协议是互联网上最流行的应用，HTTP协议并没有规定必须使用它和（基于）它支持的层。 事实上，HTTP可以在任何其他互联网协议上，或者在其他网络上实现。

HTTP只假定（其下层协议提供）可靠的传输，任何能够提供这种保证的协议都可以被其使用。  
3）通常，由HTTP客户端发起一个请求，建立一个到服务器指定端口（默认是80端口）的TCP连接。HTTP服务器则在那个端口监听客户端发送过来的请求。一旦收到请求，服务器（向客户端）发回一个状态行，

比如"HTTP/1.1 200 OK"，和（响应的）消息，消息的消息体可能是请求的文件、错误消息、或者其它一些信息。

HTTP使用TCP而不是UDP的原因在于（打开）一个网页必须传送很多数据，而TCP协议提供传输控制，按顺序组织数据，和错误纠正。  
4）通过HTTP或者HTTPS协议请求的资源由统一资源标示符（Uniform Resource Identifiers）（或者，更准确一些，URLs）来标识。

## 3.2、统一资源定位符URL

URL:统一资源定位符，通过下面格式，可以看出，就是用来定位我们所需要资源在服务器上的位置。

格式：<协议>://<主机>:<端口>/<路径>

协议：http

主机：域名/IP地址，原理度一样，到头来还是会转换为IP地址，通过这个才能找到目标服务器

端口: 在 传输层需要使用的，访问目的主机的哪个端口号 。 

路径：精准的定位我们所需要的资源位置、 

平常会省略协议和端口号，因为这些都是默认的，在访问主页时，路径也会省略。比如www.baidu.com这个默认进入百度的主页 完整写法 http://www.baidu.com:80/index.html 。

## 3.3、超文本传输协议

1）作用

怎样向服务器请求文档、服务器怎么把文档传送给浏览器，通俗点讲，就是我们想服务器访问网页资源时，服务器如何把网页上的东西传给我们。

 客户端向服务器：请求报文 服务器向客户端：响应报文

其实就是：在通过URL访问你服务器时，就会 发送一个请求报文 ，告诉服务器需要哪些东西，服务器知道后， 返回一个响应报文给客户端，其中就会带有一些网页信息 。

就是通过这个来达到传送网页资源的目的，现在来具体看看，请求报文和响应报文的格式。

## 3.4、请求和响应报文的格式

格式都一样，内容不一样。 

请求行 响应行

请求头部 响应体

请求数据 响应数据

1）请求报文格式图

![][17]

2）响应报文格式图

![][18]

这个后面我会详细的写一篇文章类学习HTTP协议。

## 3.5、HTTP协议功能

 HTTP协议（HyperText Transfer Protocol，超文本传输协议）是用于从 WWW服务器传输超文本到本地浏览器的传输协议 。它可以使浏览器更加高效，使网络传输减少。它不仅保证计算机正确快速地传输超文本文档，

还确定传输文档中的哪一部分，以及哪部分内容首先显示(如文本先于图形)等。

HTTP是 客户端浏览器或其他程序与[Web服务][19]器之间的应用层通信协议。 在Internet上的 Web服务器上存放的都是超文本信息 ，客户机需要通过HTTP协议传输所要访问的超文本信息。HTTP包含命令和传输信息，

仅可用于Web访问，也可以用于其他因特网/内联网应用系统之间的通信，从而实现各类应用资源超媒体访问的集成。

我们在浏览器的地址栏里输入的网站地址叫做URL (Uniform Resource Locator，[统一资源定位符][20])。就像每家每户都有一个门牌地址一样，每个网页也都有一个Internet地址。当你在   
浏览器的地址框中输入一个URL或是单击一个[超级链接][21]时，URL就确定了要浏览的地址。浏览器通过超文本传输协议(HTTP)，将Web服务器上站点的网页代码提取出来，并翻译成漂亮的网页。

[0]: http://www.cnblogs.com/zhangyinhua/p/7611420.html
[1]: #_label0
[2]: #_lab2_0_0
[3]: #_lab2_0_1
[4]: #_label1
[5]: #_lab2_1_0
[6]: #_lab2_1_1
[7]: #_label2
[8]: #_lab2_2_0
[9]: #_lab2_2_1
[10]: #_lab2_2_2
[11]: #_lab2_2_3
[12]: #_lab2_2_4
[13]: ./img/1593038196.png
[14]: #_labelTop
[15]: ./img/411546424.png
[16]: ./img/57881135.png
[17]: ./img/1161831966.png
[18]: ./img/1005309780.png
[19]: https://baike.baidu.com/item/Web%E6%9C%8D%E5%8A%A1
[20]: https://baike.baidu.com/item/%E7%BB%9F%E4%B8%80%E8%B5%84%E6%BA%90%E5%AE%9A%E4%BD%8D%E7%AC%A6
[21]: https://baike.baidu.com/item/%E8%B6%85%E7%BA%A7%E9%93%BE%E6%8E%A5