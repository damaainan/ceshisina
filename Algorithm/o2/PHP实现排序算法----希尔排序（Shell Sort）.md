# [PHP实现排序算法----希尔排序（Shell Sort）][0]

 标签： [php][1][希尔排序][2][排序算法][3][插入排序][4][数据结构与算法][5]

 2016-11-08 19:04  511人阅读  


版权声明：本文为博主原创文章，未经博主允许不得转载。

 目录

1. [基本思想][11]
1. [算法实现][12]
1. [复杂度分析][13]

## 基本思想：

希尔排序是指记录按下标的一定增量分组，对每一组使用 [直接插入排序][14] ，随着增量逐渐减少，每组包含的关键字越来越多，当增量减少至 1 时，整个序列恰好被分成一组，[算法][15]便终止。

操作步骤：

先取一个小于 n（序列记录个数） 的整数 d1 作为第一个增量，把文件的全部记录分组。所有距离为 d1 的倍数的记录放在同一个组中。先在各组内进行 [直接插入排序][14]；然后，取第二个增量 d2 < d1 重复上述的分组和排序，直至所取的增量 dt=1( dt < d(t-1) …< d2 < d1)，即所有记录放在同一组中进行 [直接插入排序][14] 为止.

**该方法实质上是一种分组插入方法**

比较相隔较远距离（称为增量）的数，使得数移动时能跨过多个元素，则进行一次比[2] 较就可能消除多个元素交换。D.L.shell于1959年在以他名字命名的排序算法中实现了这一思想。算法先将要排序的一组数按某个增量d分成若干组，每组中记录的下标相差d.对每组中全部元素进行排序，然后再用一个较小的增量对它进行，在每组中再进行排序。当增量减到1时，整个要排序的数被分成一组，排序完成。

一般的初次取序列的一半为增量，以后每次减半，直到增量为1。

关于增量的取法，据说迄今为止还没有找到一种最好的增量序列，不过有一个强烈的要求是 最后一个增量值必须等于 1 才行。

**给定实例的shell排序的排序过程**

假设待排序文件有10个记录，其关键字分别是：

49，38，65，97，76，13，27，49，55，04。

增量序列的取值依次为：

5，3，1

![这里写图片描述][16]

## 算法实现：
```php
    <?php
    
    //希尔排序(对直接插入排序的改进)
    
    function ShellSort(array &$arr)
    {
        $count = count($arr);
        $inc = $count;    //增量
        do {
            //计算增量
            //$inc = floor($inc / 3) + 1;
            $inc = ceil($inc / 2);
            for ($i = $inc; $i < $count; $i++) {
                $temp = $arr[$i];    //设置哨兵
                //需将$temp插入有序增量子表
                for ($j = $i - $inc; $j >= 0 && $arr[$j + $inc] < $arr[$j]; $j -= $inc) {
                    $arr[$j + $inc] = $arr[$j]; //记录后移
                }
                //插入
                $arr[$j + $inc] = $temp;
            }
            //增量为1时停止循环
        } while ($inc > 1);
    }
    
    //$arr = array(9,1,5,8,3,7,4,6,2);
    $arr = array(49,38,65,97,76,13,27,49,55,04);
    ShellSort($arr);
    var_dump($arr);
```

## 复杂度分析：

通过以上代码的分析，相信大家已经有些明白，希尔排序的关键并不是随便分组后各自排序，而是将相隔某个“增量”的记录组成一个子序列，实现跳跃式的移动，使得排序的效率提高。

最坏的情况下时间复杂度是 O(n^2)。

希尔排序是不稳定排序。

[0]: http://www.csdn.net/baidu_30000217/article/details/53084546
[1]: http://www.csdn.net/tag/php
[2]: http://www.csdn.net/tag/%e5%b8%8c%e5%b0%94%e6%8e%92%e5%ba%8f
[3]: http://www.csdn.net/tag/%e6%8e%92%e5%ba%8f%e7%ae%97%e6%b3%95
[4]: http://www.csdn.net/tag/%e6%8f%92%e5%85%a5%e6%8e%92%e5%ba%8f
[5]: http://www.csdn.net/tag/%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84%e4%b8%8e%e7%ae%97%e6%b3%95
[10]: #
[11]: #t0
[12]: #t1
[13]: #t2
[14]: http://blog.csdn.net/baidu_30000217/article/details/53072746
[15]: http://lib.csdn.net/base/datastructure
[16]: ../img/20161108184002499.png